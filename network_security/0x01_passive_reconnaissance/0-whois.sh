#!/bin/bash
whois "$1" | awk 'BEGIN{s=""}/Registrant Name:/{s=s"Name,";sub(/.*Name:[[:space:]]*/,"");s=s$0"\n"}/Registrant Organization:/{s=s"Organization,";sub(/.*Organization:[[:space:]]*/,"");s=s$0"\n"}/Registrant Street:/{s=s"Street,";sub(/.*Street:[[:space:]]*/,"");s=s$0" \n"}/Registrant City:/{s=s"City,";sub(/.*City:[[:space:]]*/,"");s=s$0"\n"}/Registrant State\/Province:/{s=s"State/Province,";sub(/.*State\/Province:[[:space:]]*/,"");s=s$0"\n"}/Registrant Postal Code:/{s=s"Postal Code,";sub(/.*Postal Code:[[:space:]]*/,"");s=s$0"\n"}/Registrant Country:/{s=s"Country,";sub(/.*Country:[[:space:]]*/,"");s=s$0"\n"}/Registrant Phone:/{if(/Phone Ext:/){s=s"Phone Ext:,";sub(/.*Phone Ext:[[:space:]]*/,"");s=s$0"\n"}else{s=s"Phone,";sub(/.*Phone:[[:space:]]*/,"");s=s$0"\n"}}/Registrant Fax:/{if(/Fax Ext:/){s=s"Fax Ext:,";sub(/.*Fax Ext:[[:space:]]*/,"");s=s$0"\n"}else{s=s"Fax,";sub(/.*Fax:[[:space:]]*/,"");s=s$0"\n"}}/Registrant Email:/{s=s"Email,";sub(/.*Email:[[:space:]]*/,"");s=s$0"\n\n"}/Admin Name:/{s=s"Name,";sub(/.*Name:[[:space:]]*/,"");s=s$0"\n"}/Admin Organization:/{s=s"Organization,";sub(/.*Organization:[[:space:]]*/,"");s=s$0"\n"}/Admin Street:/{s=s"Street,";sub(/.*Street:[[:space:]]*/,"");s=s$0" \n"}/Admin City:/{s=s"City,";sub(/.*City:[[:space:]]*/,"");s=s$0"\n"}/Admin State\/Province:/{s=s"State/Province,";sub(/.*State\/Province:[[:space:]]*/,"");s=s$0"\n"}/Admin Postal Code:/{s=s"Postal Code,";sub(/.*Postal Code:[[:space:]]*/,"");s=s$0"\n"}/Admin Country:/{s=s"Country,";sub(/.*Country:[[:space:]]*/,"");s=s$0"\n"}/Admin Phone:/{if(/Phone Ext:/){s=s"Phone Ext:,";sub(/.*Phone Ext:[[:space:]]*/,"");s=s$0"\n"}else{s=s"Phone,";sub(/.*Phone:[[:space:]]*/,"");s=s$0"\n"}}/Admin Fax:/{if(/Fax Ext:/){s=s"Fax Ext:,";sub(/.*Fax Ext:[[:space:]]*/,"");s=s$0"\n"}else{s=s"Fax,";sub(/.*Fax:[[:space:]]*/,"");s=s$0"\n"}}/Admin Email:/{s=s"Email,";sub(/.*Email:[[:space:]]*/,"");s=s$0"\n\n"}/Tech Name:/{s=s"Name,";sub(/.*Name:[[:space:]]*/,"");s=s$0"\n"}/Tech Organization:/{s=s"Organization,";sub(/.*Organization:[[:space:]]*/,"");s=s$0"\n"}/Tech Street:/{s=s"Street,";sub(/.*Street:[[:space:]]*/,"");s=s$0" \n"}/Tech City:/{s=s"City,";sub(/.*City:[[:space:]]*/,"");s=s$0"\n"}/Tech State\/Province:/{s=s"State/Province,";sub(/.*State\/Province:[[:space:]]*/,"");s=s$0"\n"}/Tech Postal Code:/{s=s"Postal Code,";sub(/.*Postal Code:[[:space:]]*/,"");s=s$0"\n"}/Tech Country:/{s=s"Country,";sub(/.*Country:[[:space:]]*/,"");s=s$0"\n"}/Tech Phone:/{if(/Phone Ext:/){s=s"Phone Ext:,";sub(/.*Phone Ext:[[:space:]]*/,"");s=s$0"\n"}else{s=s"Phone,";sub(/.*Phone:[[:space:]]*/,"");s=s$0"\n"}}/Tech Fax:/{if(/Fax Ext:/){s=s"Fax Ext:,";sub(/.*Fax Ext:[[:space:]]*/,"");s=s$0"\n"}else{s=s"Fax,";sub(/.*Fax:[[:space:]]*/,"");s=s$0"\n"}}/Tech Email:/{s=s"Email,";sub(/.*Email:[[:space:]]*/,"");s=s$0"\n"}END{printf "%s",s}'
